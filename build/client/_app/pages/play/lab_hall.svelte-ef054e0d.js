import{S as z,i as A,s as F,e as v,w as L,k as T,c as h,a as y,x as E,m as I,d as u,b,g as P,y as M,G as d,q as K,o as D,B as V,Q as j,v as H,T as J,t as Q,h as U,L as x,K as R}from"../../chunks/vendor-fc529e69.js";import{L as N,T as X,l as Y}from"../../chunks/_tileMovements-e858f124.js";import{T as Z}from"../../chunks/_tilePrompt-4ab1ae08.js";import{g as O}from"../../chunks/navigation-c0b2019f.js";import{l as ee,d as te,C as ne}from"../../chunks/minaStore-39014cbe.js";import ae from"./canvas/index.svelte-e4f9510c.js";import"../../chunks/singletons-a6a7384f.js";import"../../chunks/preload-helper-e4860ae8.js";function re(i){let e,a;return{c(){e=v("p"),a=Q("Waiting for snarky...")},l(r){e=h(r,"P",{});var t=y(e);a=U(t,"Waiting for snarky..."),t.forEach(u)},m(r,t){P(r,e,t),d(e,a)},p:x,d(r){r&&u(e)}}}function oe(i){let e,a,r,t;return{c(){e=v("button"),a=Q("Inspect Keypad")},l(o){e=h(o,"BUTTON",{});var s=y(e);a=U(s,"Inspect Keypad"),s.forEach(u)},m(o,s){P(o,e,s),d(e,a),r||(t=R(e,"click",i[4]),r=!0)},p:x,d(o){o&&u(e),r=!1,t()}}}function se(i){let e,a,r,t,o,s,k,f,S,_,l,B,g,$,G;a=new ae({props:{tileConfig:i[0]}}),s=new Z({props:{prompt:i[0].prompt}}),f=new N({});function W(n,p){return n[1]?oe:re}let q=W(i),c=q(i);return l=new N({}),$=new X({props:{movements:i[0].movements}}),{c(){e=v("div"),L(a.$$.fragment),r=T(),t=v("div"),o=v("div"),L(s.$$.fragment),k=T(),L(f.$$.fragment),S=T(),c.c(),_=T(),L(l.$$.fragment),B=T(),g=v("div"),L($.$$.fragment),this.h()},l(n){e=h(n,"DIV",{class:!0});var p=y(e);E(a.$$.fragment,p),r=I(p),t=h(p,"DIV",{class:!0});var m=y(t);o=h(m,"DIV",{id:!0,class:!0});var w=y(o);E(s.$$.fragment,w),w.forEach(u),k=I(m),E(f.$$.fragment,m),S=I(m),c.l(m),_=I(m),E(l.$$.fragment,m),B=I(m),g=h(m,"DIV",{id:!0,class:!0});var C=y(g);E($.$$.fragment,C),C.forEach(u),m.forEach(u),p.forEach(u),this.h()},h(){b(o,"id","tile-prompt"),b(o,"class","p-2 mb-12 rounded border-neutral-200 border-solid border-2 bg-white opacity-80"),b(g,"id","tile-movements"),b(g,"class","w-2xl mb-4 p-2 rounded border-neutral-200 border-solid border-2"),b(t,"class","relative bottom-36"),b(e,"class","container flex justify-center flex-wrap")},m(n,p){P(n,e,p),M(a,e,null),d(e,r),d(e,t),d(t,o),M(s,o,null),d(t,k),M(f,t,null),d(t,S),c.m(t,null),d(t,_),M(l,t,null),d(t,B),d(t,g),M($,g,null),G=!0},p(n,[p]){const m={};p&1&&(m.tileConfig=n[0]),a.$set(m);const w={};p&1&&(w.prompt=n[0].prompt),s.$set(w),q===(q=W(n))&&c?c.p(n,p):(c.d(1),c=q(n),c&&(c.c(),c.m(t,_)));const C={};p&1&&(C.movements=n[0].movements),$.$set(C)},i(n){G||(K(a.$$.fragment,n),K(s.$$.fragment,n),K(f.$$.fragment,n),K(l.$$.fragment,n),K($.$$.fragment,n),G=!0)},o(n){D(a.$$.fragment,n),D(s.$$.fragment,n),D(f.$$.fragment,n),D(l.$$.fragment,n),D($.$$.fragment,n),G=!1},d(n){n&&u(e),V(a),V(s),V(f),c.d(),V(l),V($)}}}function ie(i,e,a){let r,t,o,s;j(i,Y,l=>a(3,o=l)),j(i,te,l=>a(5,s=l)),H(async()=>{k()});const k=function(){r||ee().then(()=>{a(1,r=!0)})},f=()=>{J(ne,{onSubmit:S})},S=async l=>{await s.guessLabKey(l)=="winner"?O("/play/winner"):O("/play/loser")},_=()=>f();return i.$$.update=()=>{i.$$.dirty&8&&a(0,t=o.lab_hall)},a(1,r=!1),[t,r,f,o,_]}class $e extends z{constructor(e){super();A(this,e,ie,se,F,{})}}export{$e as default};
